{% extends "pttrack/base.html" %}

{% load bootstrap3 %}

{% block title %}
Appointment List
{% endblock %}

{% block header %}
<div class="container">
	<h1>Appointment List</h1>
</div>

{% endblock %}

{% block content %}
<div class="container">
  {% for date, app_list in appointments_by_date.iteritems %}
  	<div class="row">
  		<div class="col-md-6 col-md-offset-3">
        <div class="panel panel-default {% if forloop.first %} panel-primary {%else%} panel-info {%endif%}">
          <div class="panel-heading">
      			<h3 style="display: inline" class="panel-title">{{ date  | date:"l F d, Y" }}</h3>
            (in {{ date | timeuntil }})
          </div>
          <table class="table">
            <tr>
              <th>Time</th><th>Patient</th><th>Type</th>
            </tr>
          	{% for app in app_list %}
            <tr class="{% cycle 'active' '' %}">
          			<td>{{ app.clintime }}</td>
            		<td><b><a href="{% url 'patient-detail' pk=app.patient.id %}">{{ app.patient }}</a></b></td>
            		<td>{{ app.verbose_appointment_type }}</td>
            </tr>
            <tr>
          			<td class="{% cycle 'active' '' %}" colspan=3>
                  <p  style="margin-left: 5%; margin-right: 5%"><i>{{ app.comment }}</i></p>
                  <p style="margin-left: 5%; margin-right: 5%; text-align: right;">
                    <a class="btn btn-xs"  href="{% url 'appointment-update' pk=app.id %}">
                      <span class="glyphicon glyphicon-pencil"></span>&nbsp;edit</a>
                  </p>
                </td>
            </tr>
          	{% endfor %}
            <tr>
              <td  colspan="3" style="text-align: center"><a class="btn btn-success btn-xs" href="{% url 'appointment-new' %}?date={{date|date:"Y-m-d"}} role="button"><span class="glyphicon glyphicon glyphicon-plus"></span>&nbsp;new appointment</a>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  {% endfor %}
</div>
{% endblock %}



